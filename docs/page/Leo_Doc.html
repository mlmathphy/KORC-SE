<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <meta name="description" content="Kinetic Orbit Runaway electrons Code (KORC)">
    
    <meta name="author" content="Matt Beidler" >
    <link rel="icon" href="../favicon.png">

    <title>Leopoldo's KORC documentation &ndash; KORC</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">
    
    <link  href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">KORC </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li><a href='../page/index.html'>README</a></li>
      
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../lists/procedures.html">Procedures</a></li>
        
               
            <li><a href="../lists/types.html">Derived Types</a></li>
        
        
            <li><a href="../program/main.html">Program</a></li>
      
            </ul>
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/procedures.html">Procedures</a></li>

                             
<li class="visible-xs hidden-sm visible-lg"><a href="../lists/types.html">Derived Types</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../program/main.html">Program</a></li>

          </ul>
        
        <form action="../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  <div class="row">
    <h1>Leopoldo's KORC documentation</h1>
    <div class="row">
    <div class="col-lg-12">
    <div class="well well-sm" style="min-height: 40px;">
      <ul class="list-inline" style="margin-bottom:0px; display:inline">
         
        <li><i class="fa fa-pencil"></i> Leopoldo Carbajal</li>
         
         
<!--
        
-->
      </ul>
        <ol class="breadcrumb in-well">
      
         <li><a href='../page/index.html'>README</a></li>
      
         <li class="active">Leopoldo's KORC documentation</li>
      </ol>
    </div>
    </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-9 col-md-push-3" id='text'>
      <p></p><div class="alert alert-info" role="alert"><h4>Note</h4><p>KORC and its documentation are in constant evolution. This makes it possible that there are issues that need to be solved.
If you find an issue please report it immediatly through the "issues" section of the github repository. </p></div>
<p>
<h2 id="s1">Introduction</h2>

<p>The Kinetic Orbit Runaway electrons Code (KORC) is a full-orbit particle tracer that evolves relativistic electrons in both
analytical and grid-based pre-computed electric and magnetic fields. KORC includes the effects of: the acceleration of the
electrons due to the electric field, synchrotron radiation energy losses, and collisions with the background plasma containing
high-Z impurities.</p>
<p>For details about the equations of motion of the relativistic electrons followed by KORC we refer the user to
<em>Carbajal et al. Phys. Plasmas <b>24</b>, 042512 (2017)</em> and <em>Carbajal and del-Castillo-Negrete, Nuclear Fusion,
submitted (2018)</em>. Also, for details about the KORC's synchrotron radiation synthetic diagnostic we refer the user to
<em>Carbajal and del-Castillo-Negrete, Plasma Phys. Controll. Fusion <b>59</b>, 124001 (2017)</em>.</p>
<p>KORC is a modular Fortran 95 code that uses a hybrid MPI + open MP parallelization paradigm to exploit multi-core nodes systems,
such as Cori and Edison NERSC systems (<a href="https://www.nersc.gov">www.nersc.gov</a>).</p>
<h2 id="s"2>Installation</h2>

<p></p><div class="alert alert-warning" role="alert"><h4>Warning</h4><p>KORC has been installed and tested in systems with OS 10.6 and higher, Ubuntu 14.04, and SuSe 12. Though we have paid
special attention to portability when developing KORC, there is no guarantee that KORC can be compiled, ran, and is accurate in
other systems not listed above. As a rule of thumb, we recommend to perform any convenient benchmark tests when compiling and
running KORC in a new system, this to make sure that the external libraries and compilers do not modify the simulation results.</p></div>
<h3 id="s1s2">Getting started</h3>

<p>To compile and run KORC you will need the following:
<ol>
<li>The <a href="https://support.hdfgroup.org/downloads/index.html">HDF5</a> library for I/O.</li>
<li>The <a href="https://w3.pppl.gov/ntcc/PSPLINE/">PSPLINES</a> library for interpolating the pre-computed electric and magnetic
fields as well as the plasma profiles.</li>
<li>The GNU compilers suite, or</li>
<li>The INTEL compilers suite.</li>
<li>The corresponding open MP library</li>
<li>The MPI or open MPI library</li>
<li><a href="https://git-scm.com/"> Git, for obtaining the latest version of KORC. </a>
</ol></p>
<p>The HDF5 and PSPLINES libraries need to be installed BEFORE compiling KORC, or if these are already present in the system, they
need to be loaded to your environment and their installation paths need to be added to the Makefile accordingly. We refer the
user to the documentation of HDF5 and PSPLINES for the specifics about their installation.</p>
<p>If you are installing the HDF5 and PSPLINES libraries in your system, we recommend to perform a local installation. Then enter
the absolute path of the folder containing the <em>"lib"</em> and <em>"bin"</em> folders of each library to the PSPLINE_INSTALL
and HDF5_INSTALL variables of the Makefile.</p>
<p></p><div class="alert alert-info" role="alert"><h4>Note</h4><p>PSPLINES is known for having precision issues sometimes when compiled using the INTEL compilers suite in Linux systems.
Please, double-check that the interpolations are giving the correct numbers.</p></div>
<h3 id="s2s2"> Cloning and compiling KORC </h3>

<p>To obtain the latest version of KORC you will need to clone the Github repository to the system where you want to run KORC.
This can be done as follows:
<ol>
<li> Make sure you have all the needed external libraries and compilers in place.
<li>Using the terminal of your system, <em>cd</em> to the directory where you want to save KORC.</li>
<li>Type the following in the terminal <em>"git https://github.com/ORNL-Fusion/KORC.git"</em>. This will copy all the KORC files
from the Github repository to your local system.
<li><em>cd</em> to the KORC-FO folder.
<li>In the terminal type: <em>"./compile.sh GNU"</em> if you are using GNU compilers, or <em>"./compile.sh INTEL"</em> if you are
using INTEL compilers.
</ol></p>
<h2 id="s3"> Running KORC</h3>
If you are running KORC in a system that uses a resource manager such as TORQUE or SLURM, you will need to request the number of
nodes and cores per node that you will need, this along with any other resources such as wall time, memory per node, etc. Decide
the number of MPI processes (nmpi) and the number of open MP threads per MPI process (nomp) that you will use in your simulation.
Then, on the terminal or in your batch file type the following:

<em> mpirun -np nmpi -x OMP_NUM_THREADS=nomp ./bin/KORC "full_path_to_input_file.korc" "full_path_to_the_outputs_folder" </em>

The above example assumes that you are using the open MPI wrapper mpirun to execute the binary <em>"KORC"</em> generated after
compiling KORC. This wrapper can be replaced by any other wrapper that you might want to use. Notice that when using a different
MPI wrapper the way to pass the number of MPI processes (nmpi) and the number of open MP threads per MPI (nomp) to KORC might vary.

<h2 id="s4"> Generating the KORC's input file</h2>
KORC uses...
    </div>
    
    <div class="col-md-3 col-md-pull-9">
      <hr class="visible-xs visible-sm">
        <div class="well toc">
          <ul class="nav nav-stacked nav-pills">
            <li role="presentation" class="title"><a href='../page/index.html'>README</a></li>
          </ul>
          <hr>
          <ul class="nav nav-stacked nav-pills">
            
            <li role="presentation" class="disabled">
            <a href='../page/./Leo_Doc.html'>Leopoldo's KORC documentation</a>
            
            </li>
            
          </ul>
        </div>
    </div>
    
  </div>

    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2022 
                                          </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/cmacmackin/ford">FORD</a>
             on  
          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> KORC was developed by Matt Beidler</p></div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../tipuesearch/tipuesearch_content.js"></script>
    <script src="../tipuesearch/tipuesearch_set.js"></script>
    <script src="../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>